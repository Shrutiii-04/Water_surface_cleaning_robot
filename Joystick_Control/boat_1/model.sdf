<?xml version="1.0" ?>
<sdf version="1.9">
  <model name="boat_1">
    <static>false</static>
    <self_collide>false</self_collide>

    <link name="hull_1">
      <inertial>
        <pose>0.055 0 -0.5 0 0 0</pose> 
        <mass>2000</mass>
        <inertia>
          <ixx>5000</ixx> <iyy>5000</iyy> <izz>5000</izz> 
          <ixy>0</ixy><ixz>0</ixz><iyz>0</iyz>
        </inertia>
      </inertial>
      
      <velocity_decay>
          <linear>0.1</linear>
          <angular>50.0</angular>
      </velocity_decay>

      <collision name="hull_collision">
        <geometry><box><size>2 1.33 1.7</size></box></geometry>
      </collision>

      <collision name="stabilizer_left">
        <pose>0 1.0 0 0 0 0</pose> <geometry><box><size>1.0 0.1 0.1</size></box></geometry>
      </collision>

      <collision name="stabilizer_right">
        <pose>0 -1.0 0 0 0 0</pose> <geometry><box><size>1.0 0.1 0.1</size></box></geometry>
      </collision>

      <visual name="hull_visual">
        <geometry><mesh><uri>model://boat_1/meshes/boat.stl</uri></mesh></geometry>
      </visual>

      <link_property>
        <center_of_volume>0.8 0 0.4</center_of_volume>
        <volume>3.5</volume> 
      </link_property>
    </link>

    <link name="propeller_left">
      <pose>-1.1 -0.5 -0.24 0 0 0</pose>
      <gravity>false</gravity> 
      <inertial>
        <mass>50.0</mass>
        <inertia><ixx>0.1</ixx><iyy>0.1</iyy><izz>0.1</izz></inertia>
      </inertial>
      <visual name="prop_left_visual">
        <geometry><mesh><uri>model://boat_1/meshes/prop.stl</uri></mesh></geometry>
      </visual>
    </link>

    <link name="propeller_right">
      <pose>-1.1 0.5 -0.24 0 0 0</pose>
      <gravity>false</gravity>
      <inertial>
        <mass>50.0</mass>
        <inertia><ixx>0.1</ixx><iyy>0.1</iyy><izz>0.1</izz></inertia>
      </inertial>
      <visual name="prop_right_visual">
        <geometry><mesh><uri>model://boat_1/meshes/prop.stl</uri></mesh></geometry>
      </visual>
    </link>

    <joint name="prop_joint_left" type="revolute">
      <parent>hull_1</parent>
      <child>propeller_left</child>
      <axis>
        <xyz>1 0 0</xyz>
        <limit><lower>-1e16</lower><upper>1e16</upper></limit>
      </axis>
    </joint>

    <joint name="prop_joint_right" type="revolute">
      <parent>hull_1</parent>
      <child>propeller_right</child>
      <axis>
        <xyz>-1 0 0</xyz>
        <limit><lower>-1e16</lower><upper>1e16</upper></limit>
      </axis>
    </joint>

    <plugin filename="libignition-gazebo-thruster-system.so"
            name="ignition::gazebo::systems::Thruster">
      <joint_name>prop_joint_left</joint_name>
      <thrust_coefficient>0.1</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.2</propeller_diameter>
      <velocity_control>true</velocity_control>
      <p_gain>0.1</p_gain>
    </plugin>

    <plugin filename="libignition-gazebo-thruster-system.so"
            name="ignition::gazebo::systems::Thruster">
      <joint_name>prop_joint_right</joint_name>
      <thrust_coefficient>0.1</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.2</propeller_diameter>
      <velocity_control>true</velocity_control>
      <p_gain>0.1</p_gain>
    </plugin>

    <plugin filename="libignition-gazebo-hydrodynamics-system.so"
            name="ignition::gazebo::systems::Hydrodynamics">
      <link_name>hull_1</link_name>
      <linear_drag_coefficients>1.0 50 50</linear_drag_coefficients>
      <angular_drag_coefficients>5000 5000 5000</angular_drag_coefficients>
    </plugin>

          <link name="lidar_link">
            <pose>0.8 0 0.8 0 0 0</pose> <inertial>
              <mass>0.1</mass>
              <inertia><ixx>0.001</ixx><iyy>0.001</iyy><izz>0.001</izz></inertia>
            </inertial>
            
            <visual name="lidar_visual">
              <geometry>
                <cylinder><radius>0.05</radius><length>0.1</length></cylinder>
              </geometry>
              <material><diffuse>0 0 0 1</diffuse></material>
            </visual>

            <sensor name="front_lidar" type="gpu_lidar">
              <pose>0 0 0 0 0 0</pose>
              <topic>lidar_points</topic>
              <update_rate>10</update_rate>
              <ray>
                <scan>
                  <horizontal>
                    <samples>360</samples> <resolution>1</resolution>
                    <min_angle>-1.5707</min_angle> <max_angle>1.5707</max_angle>  </horizontal>

                  <vertical>
                    <samples>16</samples> <resolution>1</resolution>
                    <min_angle>0.0</min_angle> 
                    <max_angle>0.26</max_angle> </vertical>
                </scan>
                <range>
                  <min>0.5</min> <max>50.0</max>
                </range>
              </ray>
              <visualize>true</visualize> </sensor>
          </link>

          <joint name="lidar_joint" type="fixed">
            <parent>hull_1</parent>
            <child>lidar_link</child>
          </joint>

    
  </model>
</sdf>